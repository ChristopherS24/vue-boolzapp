<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Boolzapp</title>

        <!-- CSS -->
        <link rel="stylesheet" href="css/style.css">
        <!--FONT AWESOME-->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    </head>
    <body>

        <div id="app">

            <!-- main -->
            <main>
                <div class="container">
                
                <!--CONTACTS-->
                    <div class="contacts">

                        <div class="user">
                            <img src="img/avatar_io.jpg" alt="Sofia">
                            <h2>Sofia</h2>

                        </div>  

                        <div class="search">
                            <input type="text" placeholder="Cerca o inizia una nuova chat">
                        </div>

                        <div class="contacts-list">
                            <div class="contact" v-for="(contact, index) in contacts" 
                            class='single-contact-container'
                            :class="{
                                'active': index == activeContactIndex
                            }"
                            @click="handleContactClick(index)">
                            <img :src="contact.avatar" :alt="contact.name">

                            <div class="contact-info">
                                <h3>{{ contact.name }}</h3>
                                <p>Ultimo messaggio inviato</p>
                            </div>

                            </div>
                        </div>
                    </div>

                    <!--CHAT-->
                    <div class="chat">
                        <div class="chat-header">
                            <img :src="contacts[activeContactIndex].avatar" :alt="contacts[activeContactIndex].name">
                            <p>
                                {{ contacts[activeContactIndex].name }}
                            </p>
                         
                        </div>

                        <div class="chat-messages">
                            <div class="message" v-for="(message, index) in contacts[activeContactIndex].messages"
                            class="single-message-container"
                            :class="{
                                'sent': message.status == 'sent',
                                'received': message.status == 'received',
                            }">
                            <div class="single-message-item">
                                {{ message.message}}
                            </div>

                            </div>

                        </div>

                        <div class="chat-input">
                            <input 
                                @keyup.enter="sendMessage()"
                                v-model="userMessage"
                                type="text"
                                placeholder="Scrivi un messaggio">
                            <button>Invia</button>
                        </div>
                    </div>

                </div>
            </main>

            </div>


        </div>

        <!-- JS -->
        <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
        <script type="text/javascript" src="js/scripts.js"></script>

    </body>
</html>